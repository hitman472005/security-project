<div class="container mt-5">
  <div class="card shadow-lg border-0 rounded-4">
    <div class="card-header bg-primary text-white text-center py-3 rounded-top-4">
      <h4 class="mb-0"><i class="fa-solid fa-lock me-2"></i>Usuarios Bloqueados</h4>
    </div>

    <div class="card-body bg-light rounded-bottom-4">
      <!-- Spinner de carga -->
      @if (!users) {
      <div class="text-center my-5">
        <div class="spinner-border text-primary" role="status" style="width: 3rem; height: 3rem;"></div>
        <p class="mt-3 text-secondary fw-semibold">Cargando usuarios...</p>
      </div>

      } @else if (users.length === 0) {
      <div class="alert alert-warning text-center shadow-sm rounded-3 mt-3">
        <i class="fa-solid fa-triangle-exclamation me-2"></i>
        No hay usuarios activos registrados.
      </div>

      } @else {
      <!-- Selector de cantidad -->
      <div class="d-flex justify-content-end mb-3 align-items-center">
        <label for="itemsPerPage" class="me-2 fw-semibold text-secondary">Mostrar:</label>
        <select
          id="itemsPerPage"
          class="form-select form-select-sm w-auto border-primary text-primary fw-semibold"
          [(ngModel)]="itemsPerPage"
          (change)="onItemsPerPageChange()"
        >
          <option [value]="5">5</option>
          <option [value]="10">10</option>
          <option [value]="20">20</option>
          <option [value]="30">30</option>
          <option [value]="50">50</option>
        </select>
        <span class="ms-2 text-secondary">usuarios por página</span>
      </div>

      <!-- Tabla -->
      <div class="table-responsive">
        <table class="table table-hover align-middle text-center table-bordered border-light rounded-3">
          <thead class="table-primary">
            <tr>
              <th>ID</th>
              <th>Email</th>
              <th>Rol</th>
              <th>Estado</th>
              <th>Proveedor</th>
              <th>Acciones</th>
            </tr>
          </thead>

          <tbody class="table-light">
            @for (user of paginatedUsers(); track user.id) {
            <tr class="shadow-sm">
              <td><strong>{{ user.id }}</strong></td>
              <td>{{ user.email }}</td>
              <td>
                <span class="badge bg-secondary text-uppercase px-3 py-2">{{ user.role.name }}</span>
              </td>
              <td>
                <span class="badge bg-success text-uppercase px-3 py-2">{{ user.status.code }}</span>
              </td>
              <td>
                <span class="badge bg-info text-dark text-uppercase px-3 py-2">{{ user.provider }}</span>
              </td>
              <td>
                <button class="btn btn-sm btn-outline-primary me-1">
                  <i class="fa-solid fa-eye"></i>
                </button>
                <button class="btn btn-sm btn-outline-warning me-1">
                  <i class="fa-solid fa-pen"></i>
                </button>
                <button class="btn btn-sm btn-outline-danger" (click)="descativar(user)">
                  <i class="fa-solid fa-ban"></i>
                </button>
              </td>
            </tr>
            }
          </tbody>
        </table>
      </div>

      <!-- Navegación simple -->
      <div class="d-flex justify-content-center align-items-center mt-4">
        <button
          class="btn btn-outline-primary btn-sm me-3"
          (click)="previousPage()"
          [disabled]="currentPage === 1"
        >
          <i class="fa-solid fa-angle-left me-1"></i> Anterior
        </button>

        <span class="fw-semibold text-secondary">
          Página {{ currentPage }} de {{ totalPages }}
        </span>

        <button
          class="btn btn-outline-primary btn-sm ms-3"
          (click)="nextPage()"
          [disabled]="currentPage === totalPages"
        >
          Siguiente <i class="fa-solid fa-angle-right ms-1"></i>
        </button>
      </div>
      }
    </div>
  </div>
</div>
<br>